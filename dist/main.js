(()=>{const e="http://127.0.0.1:8082/src/data/",n=e+"lifetime_rankings.json",t=e+"lifetime_sets.json",l=e+"lifetime_games.json",a=e+"seasonal_rankings.json",o=e+"seasonal_sets.json",s=e+"seasonal_games.json",i=document.getElementById("player-selection__submit"),r=document.getElementById("p1"),g=document.getElementById("p2"),p=document.getElementById("data_output"),u=document.getElementById("error_messages"),d=" -- ",c="Player One",f="Player Two",m="Y-Town Smash",_="./public/images/fighters/",y="-00-full.png";function S(e){return e.includes(" | ")&&(e=e.split(" | ").pop()),null==e&&(e=!1),e}function h(e){u.innerHTML=e,console.log(e)}function E(e,n){delete e[n].field1,delete e[n].field2,delete e[n].field21,delete e[n].field22}function w(e){let n="",t=`<span class="tag_highlight">${e}</span>`;for(let l=0;l<102;l++)n+=l%2==0?(t+"&nbsp;"+e+"&nbsp;").repeat(6)+e+"&nbsp;":(e+"&nbsp;"+t+"&nbsp;").repeat(6)+e+"&nbsp;";return n}!async function(){try{h("Attempting to pull data...");const e=await fetch(n),k=await fetch(t),I=await fetch(l),T=await fetch(a),b=await fetch(o),L=await fetch(s);if(!e.ok)throw new Error(`She's broke bahd! Response status: ${e.status}`);if(!k.ok)throw new Error(`She's broke bahd! Response status: ${k.status}`);if(!I.ok)throw new Error(`She's broke bahd! Response status: ${I.status}`);if(!T.ok)throw new Error(`She's broke bahd! Response status: ${T.status}`);if(!b.ok)throw new Error(`She's broke bahd! Response status: ${b.status}`);if(!L.ok)throw new Error(`She's broke bahd! Response status: ${L.status}`);h("Responses OK, pulling data...");const x=await e.json(),R=await k.json(),B=await I.json(),P=await T.json(),H=await b.json(),N=await L.json();h("Creating Head 2 Head JSON: Building Player structure...");let $={};for(const e in x){let n=x[e].Player,t="";if(n.includes(" | ")){let e=n.split(" | ");n=e[1],t=e[0]}$[n]={Fighters:x[e].Characters,Country:x[e].Country,GameData:{Lifetime:{},Seasonal:{}},PlayerName:n,PowerRanking:{Lifetime:{Points:x[e].Points,Rank:x[e].Rank},Seasonal:{Points:"",Rank:""}},Tag:t,SetData:{Lifetime:{},Seasonal:{}}}}h("Creating Head 2 Head JSON: Seasonal Rankings...");for(const e in P){let n=P[e].Player,t=P[e].Points,l=P[e].Rank;n=S(n),$[n].PowerRanking.Seasonal.Points=t,$[n].PowerRanking.Seasonal.Rank=l}h("Data cleaning: Deleteing header arrays...");const O=R[0],A=B[0],D=H[0],M=N[0];delete R[0],delete B[0],delete H[0],delete N[0],h("Data cleaning: Lifetime Sets...");for(const e in R){let n=R[e].field2;null!=n&&(n=S(n),R[n]=R[e],delete R[e])}h("Data cleaning: Lifetime Games...");for(const e in B){let n=B[e].field2;null!=n&&(n=S(n),B[n]=B[e],delete B[e])}h("Data cleaning: Seasonal Sets...");for(const e in H){let n=H[e].field2;null!=n&&(n=S(n),H[n]=H[e],delete H[e])}h("Data cleaning: Seasonal Games...");for(const e in N){let n=N[e].field2;null!=n&&(n=S(n),N[n]=N[e],delete N[e])}h("Data cleaning: Key replacements for Lifetime Sets...");for(const e in R)for(const n in R[e]){let t=R[e][n],l=O[n];l=S(l),R[e][l]=t,delete R[e][n]}h("Data cleaning: Key replacements for Lifetime Games...");for(const e in B)for(const n in B[e]){let t=B[e][n],l=A[n];l=S(l),B[e][l]=t,delete B[e][n]}h("Data cleaning: Key replacements for Seasonal Sets...");for(const e in H)for(const n in H[e]){let t=H[e][n],l=D[n];l=S(l),H[e][l]=t,delete H[e][n]}h("Data cleaning: Key replacements for Seasonal Games...");for(const e in N)for(const n in N[e]){let t=N[e][n],l=M[n];l=S(l),N[e][l]=t,delete N[e][n]}h("Creating Head 2 Head JSON: Adding Lifetime Sets data...");for(const e in R)0==e?delete R[e]:(E(R,e),$[e].SetData.Lifetime=R[e]);h("Creating Head 2 Head JSON: Adding Seasonal Set data...");for(const e in H)0==e?delete H[e]:(E(H,e),$[e].SetData.Seasonal=H[e]);h("Creating Head 2 Head JSON: Adding Lifetime Game data...");for(const e in B)0==e?delete B[e]:(E(B,e),$[e].GameData.Lifetime=B[e]);h("Creating Head 2 Head JSON: Adding Seasonal Game data...");for(const e in N)0==e?delete N[e]:(E(N,e),$[e].GameData.Seasonal=N[e]);h("Head 2 Head JSON compiled, creating list of Players..."),r.innerHTML+=`<option>${c}</option>`,g.innerHTML+=`<option>${f}</option>`;for(const e in $){let n=$[e].PlayerName,t=$[e].Rank;r.innerHTML+=`<option value="${t}">${n}</option>`,g.innerHTML+=`<option value="${t}">${n}</option>`}h("Finishing up..."),i.addEventListener("click",(function(){if(function(e,n,t){return e.value!=c&&n.value!==f?(t.innerHTML="",t.style.display="none",!0):(t.innerHTML="<p>Please select two players!</p>",t.style.display="flex",!1)}(r,g,u)){window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"});let e=r.options[r.selectedIndex].innerText,n=g.options[g.selectedIndex].innerText,t=$[e].Tag,l=$[n].Tag,a=$[e].Fighters.split(" - "),o=_+a[0]+y,s=_+a[1]+y,i=$[n].Fighters.split(" - "),c=_+i[0]+y,f=_+i[1]+y,S=$[e].PowerRanking.Seasonal.Rank,h=$[e].PowerRanking.Seasonal.Points,E=$[n].PowerRanking.Seasonal.Rank,k=$[n].PowerRanking.Seasonal.Points,I=$[e].SetData.Seasonal[n],T=$[e].GameData.Seasonal[n],b=$[e].SetData.Lifetime[n],L=$[e].GameData.Lifetime[n];if(null!=I&&"0 -- 0"!=I){let a=I.split(d),i=T.split(d),r=b.split(d),g=L.split(d),u=r[0],_=g[0],y=a[0],x=i[0],R=r[1],B=g[1],P=a[1],H=i[1],N=parseInt(a[0]),$=parseInt(a[1]),O=parseInt(i[0]),A=parseInt(i[1]),D=Math.round(N/(N+$)*100),M=(Math.round(O/(O+A)*100),parseInt(r[0])),j=parseInt(r[1]),G=parseInt(g[0]),J=parseInt(g[1]),v=100-D;Math.round(M/(M+j)*100),Math.round(G/(G+J)*100),o=o.replace(" ","-").toLowerCase(),s=s.replace(" ","-").toLowerCase(),c=c.replace(" ","-").toLowerCase(),f=f.replace(" ","-").toLowerCase();const C=document.getElementById("p1_fighter"),q=document.getElementById("p2_fighter"),F=document.getElementById("p1_name"),K=document.getElementById("p2_name"),z=document.getElementById("p1_tag"),W=document.getElementById("p2_tag"),Y=document.getElementById("p1_pr"),Q=document.getElementById("p2_pr"),U=document.getElementById("p1_seasonal_points"),V=document.getElementById("p2_seasonal_points"),X=document.getElementById("title_head_to_head"),Z=document.getElementById("title_stats"),ee=document.querySelectorAll(".title_win_percent"),ne=document.querySelectorAll(".title_pr"),te=document.querySelectorAll(".sets"),le=document.querySelectorAll(".games"),ae=document.querySelectorAll(".points"),oe=document.getElementById("social_bracket"),se=document.getElementById("title_lifetime"),ie=document.getElementById("p1_lifetime_sets_win_count"),re=document.getElementById("p2_lifetime_sets_win_count"),ge=document.getElementById("p1_lifetime_games_win_count"),pe=document.getElementById("p2_lifetime_games_win_count"),ue=document.getElementById("title_seasonal"),de=document.getElementById("p1_seasonal_sets_win_percent"),ce=document.getElementById("p2_seasonal_sets_win_percent"),fe=document.getElementById("p1_seasonal_sets_win_count"),me=document.getElementById("p2_seasonal_sets_win_count"),_e=document.getElementById("p1_seasonal_games_win_count"),ye=document.getElementById("p2_seasonal_games_win_count"),Se=document.getElementById("main_logo");p.style.display="flex",Se.style.display="block",oe.style.display="block",X.innerText="Head to Head",ee.forEach((e=>e.innerText="Win %")),ne.forEach((e=>e.innerText="PR")),Z.innerText="Stats",ue.innerText="Seasonal",se.innerText="Lifetime",te.forEach((e=>e.innerText="Sets")),le.forEach((e=>e.innerText="Games")),ae.forEach((e=>e.innerText="Points")),""==t&&(t=m),""==l&&(l=m),z.innerHTML=w(t),W.innerHTML=w(l),C.src=o,q.src=c,F.innerText=e,K.innerText=n,Y.innerText=`#${S}`,Q.innerText=`#${E}`,de.innerText=`${D}%`,ce.innerText=`${v}%`,fe.innerText=`${y}`,me.innerText=`${P}`,_e.innerText=`${x}`,ye.innerText=`${H}`,U.innerText=`${h}`,V.innerText=`${k}`,ie.innerText=`${u}`,re.innerText=`${R}`,ge.innerText=`${_}`,pe.innerText=`${B}`,oe.innerText="https://start.gg/yts"}else u.innerHTML="<p>These players have not played a set this season!</p>",console.log("These players have not played a set this season!")}})),h("Ready! Awaiting player selection.");{console.group("JSON Responses"),console.log("RESPONSE_LIFETIME_RANKINGS_JSON: "),console.log(x),console.log("RESPONSE_LIFETIME_SETS_JSON: "),console.log(R),console.log("RESPONSE_LIFETIME_GAMES_JSON: "),console.log(B),console.log("RESPONSE_SEASONAL_RANKINGS_JSON: "),console.log(P),console.log("RESPONSE_SEASONAL_SETS_JSON: "),console.log(H),console.log("RESPONSE_SEASONAL_GAMES_JSON: "),console.log(N),console.groupEnd(),console.group("Head 2 Head"),console.log($),console.groupEnd(),r.options.selectedIndex=1,g.options.selectedIndex=2;let e=new Event("click");i.dispatchEvent(e);const n=["banjo-and-kazooie-00-full.png","bayonetta-00-full.png","bowser-00-full.png","bowser-jr-00-full.png","byleth-00-full.png","captain-falcon-00-full.png","chrom-00-full.png","cloud-00-full.png","corrin-00-full.png","daisy-00-full.png","dark-pit-00-full.png","dark-samus-00-full.png","diddy-kong-00-full.png","donkey-kong-00-full.png","dr-mario-00-full.png","duck-hunt-00-full.png","falco-00-full.png","fox-00-full.png","ganondorf-00-full.png","ganondorf-04-full.png","greninja-00-full.png","hero-00-full.png","ice-climbers-00-full.png","ike-00-full.png","incineroar-00-full.png","inkling-00-full.png","isabelle-00-full.png","jigglypuff-00-full.png","joker-00-full.png","kazuya-00-full.png","ken-00-full.png","king-dedede-00-full.png","king-k-rool-00-full.png","kirby-00-full.png","link-00-full.png","little-mac-00-full.png","lucario-00-full.png","lucas-00-full.png","lucina-00-full.png","luigi-00-full.png","mario-00-full.png","marth-00-full.png","mega-man-00-full.png","meta-knight-00-full.png","mewtwo-00-full.png","mii-brawler-00-full.png","mii-gunner-00-full.png","mii-swordfighter-00-full.png","min-min-00-full.png","mr-game-and-watch-00-full.png","ness-00-full.png","olimar-00-full.png","pac-man-00-full.png","palutena-00-full.png","peach-00-full.png","pichu-00-full.png","pikachu-00-full.png","piranha-plant-00-full.png","pit-00-full.png","pokemon-trainer-00-full.png","pyra-and-mythra-00-full.png","richter-00-full.png","ridley-00-full.png","rob-00-full.png","robin-00-full.png","rosalina-and-luma-00-full.png","roy-00-full.png","ryu-00-full.png","samus-00-full.png","sephiroth-00-full.png","sheik-00-full.png","shulk-00-full.png","simon-00-full.png","snake-00-full.png","sonic-00-full.png","sora-00-full.png","steve-00-full.png","terry-00-full.png","toon-link-00-full.png","villager-00-full.png","wario-00-full.png","wii-fit-trainer-00-full.png","wolf-00-full.png","yoshi-00-full.png","young-link-00-full.png","zelda-00-full.png","zero-suit-samus-00-full.png"];let t=document.querySelector(".p1_fighter"),l=document.querySelector(".p2_fighter"),a=0;document.addEventListener("keydown",(e=>{"Space"==e.code&&(t.src=_+n[a],l.src=_+n[a],a==n.length-1?a=0:a++)}))}}catch(e){console.error(e.message)}}()})();