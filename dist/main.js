(()=>{const e="http://127.0.0.1:8082/src/data/",t=e+"all_time_sets.json",a=e+"all_time_games.json",n=e+"season_to_date_sets.json",o=e+"season_to_date_games.json",s=e+"all_time_rankings.json",i=document.querySelectorAll("select"),l=document.getElementById("player_one"),r=document.getElementById("player_two"),d=document.getElementById("data"),c="Player One",f="Player Two";function p(e){d.innerHTML=e,console.log(e)}function m(e,t){delete e[t].field1,delete e[t].field2,delete e[t].field22}!async function(){try{p("Attempting to pull data...");const e=await fetch(t),u=await fetch(a),S=await fetch(n),g=await fetch(o),h=await fetch(s);if(!e.ok)throw new Error(`She's broke bahd! Response status: ${e.status}`);if(!u.ok)throw new Error(`She's broke bahd! Response status: ${u.status}`);if(!S.ok)throw new Error(`She's broke bahd! Response status: ${S.status}`);if(!g.ok)throw new Error(`She's broke bahd! Response status: ${g.status}`);if(!h.ok)throw new Error(`She's broke bahd! Response status: ${h.status}`);p("Responses OK, pulling data...");const w=await e.json(),$=await u.json(),b=await S.json(),H=await g.json(),y=await h.json();p("Creating Head 2 Head JSON: Adding players...");let L={};for(const e in y){let t=y[e].Player,a="";if(t.includes(" | ")){let e=t.split(" | ");t=e[1],a=e[0]}L[t]={Characters:y[e].Characters,Country:y[e].Country,GameData:{Lifetime:{},Seasonal:{}},Points:y[e].Points,PlayerName:t,Rank:y[e].Rank,Tag:a,SetData:{Lifetime:{},Seasonal:{}}}}p("Creating Head 2 Head JSON: Adding Lifetime Sets data...");for(const e in w)if(0==e)delete w[e];else{let t=w[e].field2;w[e].field2.includes(" | ")&&(t=w[e].field2.split(" | ").pop()),m(w,e),L[t].SetData.Lifetime=w[e]}p("Creating Head 2 Head JSON: Adding Seasonal Set data...");for(const e in b)if(0==e)delete b[e];else{let t=b[e].field2;b[e].field2.includes(" | ")&&(t=b[e].field2.split(" | ").pop()),m(b,e),L[t].SetData.Seasonal=b[e]}p("Creating Head 2 Head JSON: Adding Lifetime Game data...");for(const e in $)if(0==e)delete $[e];else{let t=$[e].field2;$[e].field2.includes(" | ")&&(t=$[e].field2.split(" | ").pop()),m($,e),L[t].GameData.Lifetime=$[e]}p("Creating Head 2 Head JSON: Adding Seasonal Game data...");for(const e in H)if(0==e)delete H[e];else{let t=H[e].field2;H[e].field2.includes(" | ")&&(t=H[e].field2.split(" | ").pop()),m(H,e),L[t].GameData.Seasonal=H[e]}p("Head 2 Head JSON compiled, creating option elements..."),console.group("Head 2 Head JSON"),console.log(L),console.groupEnd(),l.innerHTML+=`<option>${c}</option>`,r.innerHTML+=`<option>${f}</option>`;for(const e in L){let t=L[e].PlayerName,a=L[e].Rank;l.innerHTML+=`<option value="${a}">${t}</option>`,r.innerHTML+=`<option value="${a}">${t}</option>`}p("Finishing up..."),i.forEach((e=>{e.addEventListener("change",(function(){if(t=r,(e=l).options[e.selectedIndex].value!=c&&t.options[t.selectedIndex].value!=f){let e,t,a,n,o,s,i,c,f=l.options[l.selectedIndex].innerText,p=r.options[r.selectedIndex].innerText;for(const l in L)l==f&&(e=L[l].Rank,t=L[l].Characters,a=L[l].SetData.Lifetime,n=L[l].SetData.Seasonal,o=L[l].GameData.Lifetime,s=L[l].GameData.Seasonal),l==p&&(i=L[l].Rank,c=L[l].Characters);console.group("P1 LTG"),console.log(o),console.groupEnd(),d.innerHTML=`\n                    <article class="player-stats">\n                        <p>\n                            P1: ${f} (${t})\n                            <br>\n                            PR #${e}\n                            <br>\n                            <br>\n                            Lifetime Stats\n                            <br>\n                            Lifetime Sets: ${a}\n                            <br>\n                            Lifetime Games: ${o}\n                            <br>\n                            <br>\n                            Seasonal Stats\n                            <br>\n                            Seasonal Sets: ${n}\n                            <br>\n                            Seasonal Games: ${s}\n                        </p>\n                        <p>VS</p>\n                        <p>\n                            P1: ${p} (${c})\n                            <br>\n                            PR #${i}\n                        </p>\n                    </article>\n                    `}var e,t}))})),p("Ready! Awaiting player selection.")}catch(e){console.error(e.message)}}()})();