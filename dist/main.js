(()=>{const e="http://127.0.0.1:8082/src/data/",n=e+"lifetime_rankings.json",t=e+"lifetime_sets.json",l=e+"lifetime_games.json",o=e+"seasonal_rankings.json",a=e+"seasonal_sets.json",s=e+"seasonal_games.json",i=document.getElementById("player-selection__submit"),r=document.getElementById("p1"),g=document.getElementById("p2"),u=(document.getElementById("data_output"),document.getElementById("data_output_challenger")),p=document.getElementById("data_output_pr"),d=document.getElementById("data_output_stats"),c=document.getElementById("error_messages"),f=" -- ",m="Player One",y="Player Two",_="Y-Town Smash",S="./public/images/fighters/",h="-00-full.png";function E(e){return e.includes(" | ")&&(e=e.split(" | ").pop()),null==e&&(e=!1),e}function w(e){c.innerHTML=e,console.log(e)}function k(e,n){delete e[n].field1,delete e[n].field2,delete e[n].field21,delete e[n].field22}function I(e){let n="",t=`<span class="tag_highlight">${e}</span>`;for(let l=0;l<102;l++)n+=l%2==0?(t+"&nbsp;"+e+"&nbsp;").repeat(6)+e+"&nbsp;":(e+"&nbsp;"+t+"&nbsp;").repeat(6)+e+"&nbsp;";return n}!async function(){try{w("Attempting to pull data...");const e=await fetch(n),T=await fetch(t),x=await fetch(l),L=await fetch(o),B=await fetch(a),b=await fetch(s);if(!e.ok)throw new Error(`She's broke bahd! Response status: ${e.status}`);if(!T.ok)throw new Error(`She's broke bahd! Response status: ${T.status}`);if(!x.ok)throw new Error(`She's broke bahd! Response status: ${x.status}`);if(!L.ok)throw new Error(`She's broke bahd! Response status: ${L.status}`);if(!B.ok)throw new Error(`She's broke bahd! Response status: ${B.status}`);if(!b.ok)throw new Error(`She's broke bahd! Response status: ${b.status}`);w("Responses OK, pulling data...");const R=await e.json(),P=await T.json(),N=await x.json(),H=await L.json(),$=await B.json(),O=await b.json();w("Creating Head 2 Head JSON: Building Player structure...");let A={};for(const e in R){let n=R[e].Player,t="";if(n.includes(" | ")){let e=n.split(" | ");n=e[1],t=e[0]}A[n]={Fighters:R[e].Characters,Country:R[e].Country,GameData:{Lifetime:{},Seasonal:{}},PlayerName:n,PowerRanking:{Lifetime:{Points:R[e].Points,Rank:R[e].Rank},Seasonal:{Points:"",Rank:""}},Tag:t,SetData:{Lifetime:{},Seasonal:{}}}}w("Creating Head 2 Head JSON: Seasonal Rankings...");for(const e in H){let n=H[e].Player,t=H[e].Points,l=H[e].Rank;n=E(n),A[n].PowerRanking.Seasonal.Points=t,A[n].PowerRanking.Seasonal.Rank=l}w("Data cleaning: Deleteing header arrays...");const D=P[0],j=N[0],G=$[0],M=O[0];delete P[0],delete N[0],delete $[0],delete O[0],w("Data cleaning: Lifetime Sets...");for(const e in P){let n=P[e].field2;null!=n&&(n=E(n),P[n]=P[e],delete P[e])}w("Data cleaning: Lifetime Games...");for(const e in N){let n=N[e].field2;null!=n&&(n=E(n),N[n]=N[e],delete N[e])}w("Data cleaning: Seasonal Sets...");for(const e in $){let n=$[e].field2;null!=n&&(n=E(n),$[n]=$[e],delete $[e])}w("Data cleaning: Seasonal Games...");for(const e in O){let n=O[e].field2;null!=n&&(n=E(n),O[n]=O[e],delete O[e])}w("Data cleaning: Key replacements for Lifetime Sets...");for(const e in P)for(const n in P[e]){let t=P[e][n],l=D[n];l=E(l),P[e][l]=t,delete P[e][n]}w("Data cleaning: Key replacements for Lifetime Games...");for(const e in N)for(const n in N[e]){let t=N[e][n],l=j[n];l=E(l),N[e][l]=t,delete N[e][n]}w("Data cleaning: Key replacements for Seasonal Sets...");for(const e in $)for(const n in $[e]){let t=$[e][n],l=G[n];l=E(l),$[e][l]=t,delete $[e][n]}w("Data cleaning: Key replacements for Seasonal Games...");for(const e in O)for(const n in O[e]){let t=O[e][n],l=M[n];l=E(l),O[e][l]=t,delete O[e][n]}w("Creating Head 2 Head JSON: Adding Lifetime Sets data...");for(const e in P)0==e?delete P[e]:(k(P,e),A[e].SetData.Lifetime=P[e]);w("Creating Head 2 Head JSON: Adding Seasonal Set data...");for(const e in $)0==e?delete $[e]:(k($,e),A[e].SetData.Seasonal=$[e]);w("Creating Head 2 Head JSON: Adding Lifetime Game data...");for(const e in N)0==e?delete N[e]:(k(N,e),A[e].GameData.Lifetime=N[e]);w("Creating Head 2 Head JSON: Adding Seasonal Game data...");for(const e in O)0==e?delete O[e]:(k(O,e),A[e].GameData.Seasonal=O[e]);w("Head 2 Head JSON compiled, creating list of Players..."),r.innerHTML+=`<option>${m}</option>`,g.innerHTML+=`<option>${y}</option>`;for(const e in A){let n=A[e].PlayerName,t=A[e].Rank;r.innerHTML+=`<option value="${t}">${n}</option>`,g.innerHTML+=`<option value="${t}">${n}</option>`}w("Finishing up..."),i.addEventListener("click",(function(){if(function(e,n,t){return e.value!=m&&n.value!==y?(t.innerHTML="",t.style.display="none",!0):(t.innerHTML="<p>Please select two players!</p>",t.style.display="flex",!1)}(r,g,c)){window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"});let e=r.options[r.selectedIndex].innerText,n=g.options[g.selectedIndex].innerText,t=A[e].Tag,l=A[n].Tag;""==t&&(t=_),""==l&&(l=_);let o=A[e].Fighters.split(" - "),a=S+o[0]+h,s=S+o[1]+h,i=A[n].Fighters.split(" - "),m=S+i[0]+h,y=S+i[1]+h;a=a.replace(" ","-").toLowerCase(),s=s.replace(" ","-").toLowerCase(),m=m.replace(" ","-").toLowerCase(),y=y.replace(" ","-").toLowerCase();let E=A[e].PowerRanking.Seasonal.Rank,w=A[e].PowerRanking.Seasonal.Points,k=A[n].PowerRanking.Seasonal.Rank,T=A[n].PowerRanking.Seasonal.Points;""==E&&(E="?"),""==k&&(k="?");let x=A[e].SetData.Seasonal[n],L=A[e].GameData.Seasonal[n],B=A[e].SetData.Lifetime[n],b=A[e].GameData.Lifetime[n];const R=document.getElementById("p1_tag"),P=document.getElementById("p2_tag"),N=document.getElementById("p1_name"),H=document.getElementById("p2_name"),$=document.getElementById("p1_fighter"),O=document.getElementById("p2_fighter"),D=document.getElementById("title_challenger"),j=document.getElementById("challenger_icon"),G=document.getElementById("title_head_to_head"),M=document.querySelectorAll(".title_win_percent"),J=document.querySelectorAll(".title_pr"),v=document.getElementById("p1_pr"),C=document.getElementById("p2_pr"),q=document.getElementById("p1_seasonal_sets_win_percent"),F=document.getElementById("p2_seasonal_sets_win_percent"),K=document.getElementById("title_stats"),z=document.getElementById("title_seasonal"),W=document.getElementById("title_lifetime"),Y=document.querySelectorAll(".sets"),Q=document.querySelectorAll(".games"),U=document.querySelectorAll(".points"),V=document.getElementById("p1_seasonal_sets_win_count"),X=document.getElementById("p2_seasonal_sets_win_count"),Z=document.getElementById("p1_seasonal_games_win_count"),ee=document.getElementById("p2_seasonal_games_win_count"),ne=document.getElementById("p1_seasonal_points"),te=document.getElementById("p2_seasonal_points"),le=document.getElementById("p1_lifetime_sets_win_count"),oe=document.getElementById("p2_lifetime_sets_win_count"),ae=document.getElementById("p1_lifetime_games_win_count"),se=document.getElementById("p2_lifetime_games_win_count"),ie=document.getElementById("main_logo"),re=document.getElementById("social_bracket");if(R.innerHTML=I(t),P.innerHTML=I(l),N.innerText=e,H.innerText=n,$.src=a,O.src=m,G.innerText="Head to Head",M.forEach((e=>e.innerText="Win %")),J.forEach((e=>e.innerText="PR")),v.innerText=`#${E}`,C.innerText=`#${k}`,null!=x&&"0 -- 0"!=x){let e=x.split(f),n=L.split(f),t=B.split(f),l=b.split(f),o=t[0],a=l[0],s=e[0],i=n[0],r=t[1],g=l[1],c=e[1],m=n[1],y=parseInt(e[0]),_=parseInt(e[1]),S=Math.round(y/(y+_)*100),h=100-S;u.style.display="none",p.style.display="flex",d.style.display="flex",ie.style.display="block",re.style.display="block",K.innerText="Stats",z.innerText="Seasonal",W.innerText="Lifetime",Y.forEach((e=>e.innerText="Sets")),Q.forEach((e=>e.innerText="Games")),U.forEach((e=>e.innerText="Points"));const E=document.querySelector(".p1_win"),k=document.querySelector(".p2_win");S!==h&&(E.classList.remove("win"),k.classList.remove("win"),S>h&&E.classList.add("win"),h>S&&k.classList.add("win")),q.innerText=`${S}%`,F.innerText=`${h}%`,V.innerText=`${s}`,X.innerText=`${c}`,Z.innerText=`${i}`,ee.innerText=`${m}`,ne.innerText=`${w}`,te.innerText=`${T}`,le.innerText=`${o}`,oe.innerText=`${r}`,ae.innerText=`${a}`,se.innerText=`${g}`,re.innerText="https://start.gg/yts"}else c.style.display="none",p.style.display="none",d.style.display="none",ie.style.display="none",re.style.display="none",u.style.display="flex",D.innerText="A new challenger approaches!",j.innerText="!"}})),w("Ready! Awaiting player selection.");{console.group("JSON Responses"),console.log("RESPONSE_LIFETIME_RANKINGS_JSON: "),console.log(R),console.log("RESPONSE_LIFETIME_SETS_JSON: "),console.log(P),console.log("RESPONSE_LIFETIME_GAMES_JSON: "),console.log(N),console.log("RESPONSE_SEASONAL_RANKINGS_JSON: "),console.log(H),console.log("RESPONSE_SEASONAL_SETS_JSON: "),console.log($),console.log("RESPONSE_SEASONAL_GAMES_JSON: "),console.log(O),console.groupEnd(),console.group("Head 2 Head"),console.log(A),console.groupEnd(),r.options.selectedIndex=1,g.options.selectedIndex=2;let e=new Event("click");i.dispatchEvent(e);const n=["banjo-and-kazooie-00-full.png","bayonetta-00-full.png","bowser-00-full.png","bowser-jr-00-full.png","byleth-00-full.png","captain-falcon-00-full.png","chrom-00-full.png","cloud-00-full.png","corrin-00-full.png","daisy-00-full.png","dark-pit-00-full.png","dark-samus-00-full.png","diddy-kong-00-full.png","donkey-kong-00-full.png","dr-mario-00-full.png","duck-hunt-00-full.png","falco-00-full.png","fox-00-full.png","ganondorf-00-full.png","ganondorf-04-full.png","greninja-00-full.png","hero-00-full.png","ice-climbers-00-full.png","ike-00-full.png","incineroar-00-full.png","inkling-00-full.png","isabelle-00-full.png","jigglypuff-00-full.png","joker-00-full.png","kazuya-00-full.png","ken-00-full.png","king-dedede-00-full.png","king-k-rool-00-full.png","kirby-00-full.png","link-00-full.png","little-mac-00-full.png","lucario-00-full.png","lucas-00-full.png","lucina-00-full.png","luigi-00-full.png","mario-00-full.png","marth-00-full.png","mega-man-00-full.png","meta-knight-00-full.png","mewtwo-00-full.png","mii-brawler-00-full.png","mii-gunner-00-full.png","mii-swordfighter-00-full.png","min-min-00-full.png","mr-game-and-watch-00-full.png","ness-00-full.png","olimar-00-full.png","pac-man-00-full.png","palutena-00-full.png","peach-00-full.png","pichu-00-full.png","pikachu-00-full.png","piranha-plant-00-full.png","pit-00-full.png","pokemon-trainer-00-full.png","pyra-and-mythra-00-full.png","richter-00-full.png","ridley-00-full.png","rob-00-full.png","robin-00-full.png","rosalina-and-luma-00-full.png","roy-00-full.png","ryu-00-full.png","samus-00-full.png","sephiroth-00-full.png","sheik-00-full.png","shulk-00-full.png","simon-00-full.png","snake-00-full.png","sonic-00-full.png","sora-00-full.png","steve-00-full.png","terry-00-full.png","toon-link-00-full.png","villager-00-full.png","wario-00-full.png","wii-fit-trainer-00-full.png","wolf-00-full.png","yoshi-00-full.png","young-link-00-full.png","zelda-00-full.png","zero-suit-samus-00-full.png"];let t=document.querySelector(".p1_fighter"),l=document.querySelector(".p2_fighter"),o=0;document.addEventListener("keydown",(e=>{"Space"==e.code&&(t.src=S+n[o],l.src=S+n[o],o==n.length-1?o=0:o++)}))}}catch(e){console.error(e.message)}}()})();