(()=>{const e="http://127.0.0.1:8082/src/data/",t=e+"lifetime_rankings.json",n=e+"lifetime_sets.json",a=e+"lifetime_games.json",s=e+"seasonal_rankings.json",l=e+"seasonal_sets.json",o=e+"seasonal_games.json",i=document.getElementById("player-selection__submit"),r=document.getElementById("p1"),d=document.getElementById("p2"),c=(document.getElementById("data_output"),document.getElementById("data_output_challenger")),m=document.getElementById("data_output_pr"),p=document.getElementById("data_output_stats"),u=document.getElementById("error_messages"),g=" -- ",y="Player One",f="Player Two",_="Y-Town Smash",w="./public/images/fighters/",h="-00-full.png";function S(e){return e.includes(" | ")&&(e=e.split(" | ").pop()),null==e&&(e=!1),e}function E(e){u.innerHTML=e,console.log(e)}function T(e,t){delete e[t].field1,delete e[t].field2,delete e[t].field21,delete e[t].field22}function I(e){let t="",n=`<span class="tag_highlight">${e}</span>`;for(let a=0;a<102;a++)t+=a%2==0?(n+"&nbsp;"+e+"&nbsp;").repeat(6)+e+"&nbsp;":(e+"&nbsp;"+n+"&nbsp;").repeat(6)+e+"&nbsp;";return t}!async function(){try{E("Attempting to pull data...");const e=await fetch(t),B=await fetch(n),x=await fetch(a),k=await fetch(s),L=await fetch(l),$=await fetch(o);if(!e.ok)throw new Error(`She's broke bahd! Response status: ${e.status}`);if(!B.ok)throw new Error(`She's broke bahd! Response status: ${B.status}`);if(!x.ok)throw new Error(`She's broke bahd! Response status: ${x.status}`);if(!k.ok)throw new Error(`She's broke bahd! Response status: ${k.status}`);if(!L.ok)throw new Error(`She's broke bahd! Response status: ${L.status}`);if(!$.ok)throw new Error(`She's broke bahd! Response status: ${$.status}`);E("Responses OK, pulling data...");const H=await e.json(),b=await B.json(),P=await x.json(),R=await k.json(),D=await L.json(),A=await $.json();E("Creating Head 2 Head JSON: Building Player structure...");let C={};for(const e in H){let t=H[e].Player,n="";if(t.includes(" | ")){let e=t.split(" | ");t=e[1],n=e[0]}C[t]={Fighters:H[e].Characters,Country:H[e].Country,GameData:{Lifetime:{},Seasonal:{}},PlayerName:t,PowerRanking:{Lifetime:{Points:H[e].Points,Rank:H[e].Rank},Seasonal:{Points:"",Rank:""}},Tag:n,SetData:{Lifetime:{},Seasonal:{}}}}E("Creating Head 2 Head JSON: Seasonal Rankings...");for(const e in R){let t=R[e].Player,n=R[e].Points,a=R[e].Rank;t=S(t),C[t].PowerRanking.Seasonal.Points=n,C[t].PowerRanking.Seasonal.Rank=a}E("Data cleaning: Deleteing header arrays...");const j=b[0],G=P[0],M=D[0],N=A[0];delete b[0],delete P[0],delete D[0],delete A[0],E("Data cleaning: Lifetime Sets...");for(const e in b){let t=b[e].field2;null!=t&&(t=S(t),b[t]=b[e],delete b[e])}E("Data cleaning: Lifetime Games...");for(const e in P){let t=P[e].field2;null!=t&&(t=S(t),P[t]=P[e],delete P[e])}E("Data cleaning: Seasonal Sets...");for(const e in D){let t=D[e].field2;null!=t&&(t=S(t),D[t]=D[e],delete D[e])}E("Data cleaning: Seasonal Games...");for(const e in A){let t=A[e].field2;null!=t&&(t=S(t),A[t]=A[e],delete A[e])}E("Data cleaning: Key replacements for Lifetime Sets...");for(const e in b)for(const t in b[e]){let n=b[e][t],a=j[t];a=S(a),b[e][a]=n,delete b[e][t]}E("Data cleaning: Key replacements for Lifetime Games...");for(const e in P)for(const t in P[e]){let n=P[e][t],a=G[t];a=S(a),P[e][a]=n,delete P[e][t]}E("Data cleaning: Key replacements for Seasonal Sets...");for(const e in D)for(const t in D[e]){let n=D[e][t],a=M[t];a=S(a),D[e][a]=n,delete D[e][t]}E("Data cleaning: Key replacements for Seasonal Games...");for(const e in A)for(const t in A[e]){let n=A[e][t],a=N[t];a=S(a),A[e][a]=n,delete A[e][t]}E("Creating Head 2 Head JSON: Adding Lifetime Sets data...");for(const e in b)0==e?delete b[e]:(T(b,e),C[e].SetData.Lifetime=b[e]);E("Creating Head 2 Head JSON: Adding Seasonal Set data...");for(const e in D)0==e?delete D[e]:(T(D,e),C[e].SetData.Seasonal=D[e]);E("Creating Head 2 Head JSON: Adding Lifetime Game data...");for(const e in P)0==e?delete P[e]:(T(P,e),C[e].GameData.Lifetime=P[e]);E("Creating Head 2 Head JSON: Adding Seasonal Game data...");for(const e in A)0==e?delete A[e]:(T(A,e),C[e].GameData.Seasonal=A[e]);E("Head 2 Head JSON compiled, creating list of Players..."),r.innerHTML+=`<option>${y}</option>`,d.innerHTML+=`<option>${f}</option>`;for(const e in C){let t=C[e].PlayerName,n=C[e].Rank;r.innerHTML+=`<option value="${n}">${t}</option>`,d.innerHTML+=`<option value="${n}">${t}</option>`}E("Finishing up..."),i.addEventListener("click",(function(){if(function(e,t,n){return e.value!=y&&t.value!==f?(n.innerHTML="",n.style.display="none",!0):(n.innerHTML="<p>Please select two players!</p>",n.style.display="flex",!1)}(r,d,u)){window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"});let e=r.options[r.selectedIndex].innerText,t=d.options[d.selectedIndex].innerText,n=C[e].Tag,a=C[t].Tag;""==n&&(n=_),""==a&&(a=_);let s=C[e].Fighters.split(" - "),l=w+s[0]+h,o=w+s[1]+h,i=C[t].Fighters.split(" - "),y=w+i[0]+h,f=w+i[1]+h;l=l.replace(" / "," and "),l=l.replaceAll(" ","-").toLowerCase(),o=o.replace(" / "," and "),o=o.replaceAll(" ","-").toLowerCase(),y=y.replace(" / "," and "),y=y.replaceAll(" ","-").toLowerCase(),f=f.replace(" / "," and "),f=f.replaceAll(" ","-").toLowerCase();let S=C[e].PowerRanking.Seasonal.Rank,E=C[e].PowerRanking.Seasonal.Points,T=C[t].PowerRanking.Seasonal.Rank,B=C[t].PowerRanking.Seasonal.Points;""==S&&(S="?"),""==T&&(T="?");let x=C[e].SetData.Seasonal[t],k=C[e].GameData.Seasonal[t],L=C[e].SetData.Lifetime[t],$=C[e].GameData.Lifetime[t];const H=document.getElementById("p1_tag"),b=document.getElementById("p2_tag"),P=document.getElementById("p1_name"),R=document.getElementById("p2_name"),D=document.getElementById("p1_fighter"),A=document.getElementById("p2_fighter"),j=document.getElementById("title_challenger"),G=document.getElementById("challenger_icon"),M=document.getElementById("title_head_to_head"),N=document.querySelectorAll(".title_win_percent"),O=document.querySelectorAll(".title_pr"),v=document.getElementById("p1_pr"),q=document.getElementById("p2_pr"),J=document.getElementById("p1_seasonal_sets_win_percent"),K=document.getElementById("p2_seasonal_sets_win_percent"),F=document.getElementById("title_stats"),W=document.getElementById("title_seasonal"),Y=document.getElementById("title_lifetime"),z=document.querySelectorAll(".sets"),Q=document.querySelectorAll(".games"),U=document.querySelectorAll(".points"),V=document.getElementById("p1_seasonal_sets_win_count"),X=document.getElementById("p2_seasonal_sets_win_count"),Z=document.getElementById("p1_seasonal_games_win_count"),ee=document.getElementById("p2_seasonal_games_win_count"),te=document.getElementById("p1_seasonal_points"),ne=document.getElementById("p2_seasonal_points"),ae=document.getElementById("p1_lifetime_sets_win_count"),se=document.getElementById("p2_lifetime_sets_win_count"),le=document.getElementById("p1_lifetime_games_win_count"),oe=document.getElementById("p2_lifetime_games_win_count"),ie=document.getElementById("main_logo"),re=document.getElementById("social_bracket");if(H.innerHTML=I(n),b.innerHTML=I(a),P.innerText=e,R.innerText=t,D.src=l,A.src=y,M.innerText="Head to Head",N.forEach((e=>e.innerText="Win %")),O.forEach((e=>e.innerText="PR")),v.innerText=`#${S}`,q.innerText=`#${T}`,null!=x&&"0 -- 0"!=x){let e=x.split(g),t=k.split(g),n=L.split(g),a=$.split(g),s=n[0],l=a[0],o=e[0],i=t[0],r=n[1],d=a[1],u=e[1],y=t[1],f=parseInt(e[0]),_=parseInt(e[1]),w=Math.round(f/(f+_)*100),h=100-w;c.style.display="none",m.style.display="flex",p.style.display="flex",ie.style.display="block",re.style.display="block",F.innerText="Stats",W.innerText="Seasonal",Y.innerText="Lifetime",z.forEach((e=>e.innerText="Sets")),Q.forEach((e=>e.innerText="Games")),U.forEach((e=>e.innerText="Points"));const S=document.querySelector(".p1_win"),T=document.querySelector(".p2_win");S.classList.remove("win"),T.classList.remove("win"),w>h&&S.classList.add("win"),h>w&&T.classList.add("win"),J.innerText=`${w}%`,K.innerText=`${h}%`,V.innerText=`${o}`,X.innerText=`${u}`,Z.innerText=`${i}`,ee.innerText=`${y}`,te.innerText=`${E}`,ne.innerText=`${B}`,ae.innerText=`${s}`,se.innerText=`${r}`,le.innerText=`${l}`,oe.innerText=`${d}`,re.innerText="start.gg/yts",H.classList.add("animate_tag"),b.classList.add("animate_tag")}else u.style.display="none",m.style.display="none",p.style.display="none",ie.style.display="none",re.style.display="none",c.style.display="flex",j.innerText="A new challenger approaches!",G.innerText="!"}})),E("Ready! Awaiting player selection.")}catch(e){console.error(e.message)}}()})();