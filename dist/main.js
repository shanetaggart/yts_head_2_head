(()=>{const e="http://127.0.0.1:8082/src/data/",t=e+"lifetime_rankings.json",n=e+"lifetime_sets.json",a=e+"lifetime_games.json",o=e+"seasonal_rankings.json",s=e+"seasonal_sets.json",l=e+"seasonal_games.json",i=document.getElementById("player-selection__submit"),r=document.getElementById("player_one"),d=document.getElementById("player_two"),m=(document.getElementById("data"),document.getElementById("progress-log"),"Player One"),c="Player Two",p="./public/images/fighters/",g="-00-full.png",y=" -- ";function f(e){return e.includes(" | ")&&(e=e.split(" | ").pop()),null==e&&(e=!1),e}function u(e){console.log(e)}function _(e,t){delete e[t].field1,delete e[t].field2,delete e[t].field21,delete e[t].field22}!async function(){try{u("Attempting to pull data...");const e=await fetch(t),w=await fetch(n),S=await fetch(a),h=await fetch(o),I=await fetch(s),E=await fetch(l);if(!e.ok)throw new Error(`She's broke bahd! Response status: ${e.status}`);if(!w.ok)throw new Error(`She's broke bahd! Response status: ${w.status}`);if(!S.ok)throw new Error(`She's broke bahd! Response status: ${S.status}`);if(!h.ok)throw new Error(`She's broke bahd! Response status: ${h.status}`);if(!I.ok)throw new Error(`She's broke bahd! Response status: ${I.status}`);if(!E.ok)throw new Error(`She's broke bahd! Response status: ${E.status}`);u("Responses OK, pulling data...");const k=await e.json(),T=await w.json(),$=await S.json(),B=await h.json(),L=await I.json(),x=await E.json();u("Creating Head 2 Head JSON: Building Player structure...");let P={};for(const e in k){let t=k[e].Player,n="";if(t.includes(" | ")){let e=t.split(" | ");t=e[1],n=e[0]}P[t]={Characters:k[e].Characters,Country:k[e].Country,GameData:{Lifetime:{},Seasonal:{}},PlayerName:t,PowerRanking:{Lifetime:{Points:k[e].Points,Rank:k[e].Rank},Seasonal:{Points:"",Rank:""}},Tag:n,SetData:{Lifetime:{},Seasonal:{}}}}u("Creating Head 2 Head JSON: Seasonal Rankings...");for(const e in B){let t=B[e].Player,n=B[e].Points,a=B[e].Rank;t=f(t),P[t].PowerRanking.Seasonal.Points=n,P[t].PowerRanking.Seasonal.Rank=a}u("Data cleaning: Deleteing header arrays...");const R=T[0],H=$[0],D=L[0],b=x[0];delete T[0],delete $[0],delete L[0],delete x[0],u("Data cleaning: Lifetime Sets...");for(const e in T){let t=T[e].field2;null!=t&&(t=f(t),T[t]=T[e],delete T[e])}u("Data cleaning: Lifetime Games...");for(const e in $){let t=$[e].field2;null!=t&&(t=f(t),$[t]=$[e],delete $[e])}u("Data cleaning: Seasonal Sets...");for(const e in L){let t=L[e].field2;null!=t&&(t=f(t),L[t]=L[e],delete L[e])}u("Data cleaning: Seasonal Games...");for(const e in x){let t=x[e].field2;null!=t&&(t=f(t),x[t]=x[e],delete x[e])}u("Data cleaning: Key replacements for Lifetime Sets...");for(const e in T)for(const t in T[e]){let n=T[e][t],a=R[t];a=f(a),T[e][a]=n,delete T[e][t]}u("Data cleaning: Key replacements for Lifetime Games...");for(const e in $)for(const t in $[e]){let n=$[e][t],a=H[t];a=f(a),$[e][a]=n,delete $[e][t]}u("Data cleaning: Key replacements for Seasonal Sets...");for(const e in L)for(const t in L[e]){let n=L[e][t],a=D[t];a=f(a),L[e][a]=n,delete L[e][t]}u("Data cleaning: Key replacements for Seasonal Games...");for(const e in x)for(const t in x[e]){let n=x[e][t],a=b[t];a=f(a),x[e][a]=n,delete x[e][t]}u("Creating Head 2 Head JSON: Adding Lifetime Sets data...");for(const e in T)0==e?delete T[e]:(_(T,e),P[e].SetData.Lifetime=T[e]);u("Creating Head 2 Head JSON: Adding Seasonal Set data...");for(const e in L)0==e?delete L[e]:(_(L,e),P[e].SetData.Seasonal=L[e]);u("Creating Head 2 Head JSON: Adding Lifetime Game data...");for(const e in $)0==e?delete $[e]:(_($,e),P[e].GameData.Lifetime=$[e]);u("Creating Head 2 Head JSON: Adding Seasonal Game data...");for(const e in x)0==e?delete x[e]:(_(x,e),P[e].GameData.Seasonal=x[e]);u("Head 2 Head JSON compiled, creating list of Players..."),r.innerHTML+=`<option>${m}</option>`,d.innerHTML+=`<option>${c}</option>`;for(const e in P){let t=P[e].PlayerName,n=P[e].Rank;r.innerHTML+=`<option value="${n}">${t}</option>`,d.innerHTML+=`<option value="${n}">${t}</option>`}u("Finishing up..."),i.addEventListener("click",(function(){if(e=d,r.value!=m&&e.value!==c){window.scrollTo(0,document.body.scrollHeight);let e=r.options[r.selectedIndex].innerText,t=d.options[d.selectedIndex].innerText,n=P[e].Tag,a=P[t].Tag,o=P[e].Characters.split(" - "),s=p+o[0]+g,l=p+o[1]+g,i=P[t].Characters.split(" - "),m=p+i[0]+g,c=p+i[1]+g,f=P[e].PowerRanking.Seasonal.Rank,u=P[e].PowerRanking.Lifetime.Points,_=P[e].PowerRanking.Seasonal.Points,w=P[t].PowerRanking.Seasonal.Rank,S=P[t].PowerRanking.Lifetime.Points,h=P[t].PowerRanking.Seasonal.Points,I=P[e].SetData.Seasonal[t],E=P[e].GameData.Seasonal[t],k=P[e].SetData.Lifetime[t],T=P[e].GameData.Lifetime[t];if(null!=I&&"0 -- 0"!=I){let o=I.split(y),i=E.split(y),r=k.split(y),d=T.split(y),p=r[0],g=d[0],$=o[0],B=i[0],L=r[1],x=d[1],P=o[1],R=i[1],H=parseInt(o[0]),D=parseInt(o[1]),b=parseInt(i[0]),C=parseInt(i[1]),G=Math.round(H/(H+D)*100),j=Math.round(b/(b+C)*100),N=parseInt(r[0]),O=parseInt(r[1]),v=parseInt(d[0]),M=parseInt(d[1]),J=Math.round(N/(N+O)*100),A=Math.round(v/(v+M)*100),K=100-G,F=100-j,q=100-J,z=100-A;s=s.replace(" ","-").toLowerCase(),l=l.replace(" ","-").toLowerCase(),m=m.replace(" ","-").toLowerCase(),c=c.replace(" ","-").toLowerCase();const Q=document.getElementById("player_one_character"),U=document.getElementById("player_two_character"),V=document.getElementById("player_one_name"),W=document.getElementById("player_two_name"),X=document.getElementById("player_one_tag"),Y=document.getElementById("player_two_tag"),Z=document.getElementById("player_one_pr"),ee=document.getElementById("player_two_pr"),te=document.getElementById("player_one_points_seasonal"),ne=document.getElementById("player_two_points_seasonal"),ae=document.getElementById("player_one_points_lifetime"),oe=document.getElementById("player_two_points_lifetime"),se=document.getElementById("lifetime_sets_title"),le=document.getElementById("player_one_lifetime_sets"),ie=document.getElementById("player_two_lifetime_sets"),re=document.getElementById("lifetime_games_title"),de=document.getElementById("player_one_lifetime_games"),me=document.getElementById("player_two_lifetime_games"),ce=document.getElementById("seasonal_sets_title"),pe=document.getElementById("player_one_seasonal_sets"),ge=document.getElementById("player_two_seasonal_sets"),ye=document.getElementById("seasonal_games_title"),fe=document.getElementById("player_one_seasonal_games"),ue=document.getElementById("player_two_seasonal_games"),_e=document.getElementById("main_logo"),we=document.getElementById("player_one_details"),Se=document.getElementById("player_two_details");_e.style.display="block",Q.src=s,U.src=m,we.style.display="block",Se.style.display="block",X.innerText=n,Y.innerText=a,V.innerText=e,W.innerText=t,Z.innerText=`#${f}`,ee.innerText=`#${w}`,te.innerText=`Seasonal: ${_} pts`,ae.innerText=`Lifetime: ${u} pts`,ne.innerText=`Seasonal: ${h} pts`,oe.innerText=`Lifetime: ${S} pts`,pe.innerText=`${G}% (${$})`,ce.innerText="Seasonal Sets",ge.innerText=`${K}% (${P})`,fe.innerText=`${j}% (${B})`,ye.innerText="Seasonal Games",ue.innerText=`${F}% (${R})`,le.innerText=`${J}% (${p})`,se.innerText="Lifetime Sets",ie.innerText=`${q}% (${L})`,de.innerText=`${A}% (${g})`,re.innerText="Lifetime Games",me.innerText=`${z}% (${x})`}else seasonal_sets_title.innerText="These players have not played a set this season!",console.log("These players have not played a set this season!")}var e})),u("Ready! Awaiting player selection."),console.group("Head 2 Head"),console.log(P),console.groupEnd()}catch(e){console.error(e.message)}}()})();