(()=>{const e="http://127.0.0.1:8082/src/data/",t=e+"lifetime_rankings.json",n=e+"lifetime_sets.json",a=e+"lifetime_games.json",o=e+"seasonal_rankings.json",s=e+"seasonal_sets.json",l=e+"seasonal_games.json",i=document.getElementById("player-selection__submit"),r=document.getElementById("player_one"),d=document.getElementById("player_two"),c=(document.getElementById("data"),document.getElementById("progress-log"),"Player One"),m="Player Two",p="./public/images/fighters/",g="-00-full.png",y=" -- ";function f(e){return e.includes(" | ")&&(e=e.split(" | ").pop()),null==e&&(e=!1),e}function u(e){console.log(e)}function _(e,t){delete e[t].field1,delete e[t].field2,delete e[t].field21,delete e[t].field22}!async function(){try{u("Attempting to pull data...");const e=await fetch(t),w=await fetch(n),h=await fetch(a),S=await fetch(o),E=await fetch(s),I=await fetch(l);if(!e.ok)throw new Error(`She's broke bahd! Response status: ${e.status}`);if(!w.ok)throw new Error(`She's broke bahd! Response status: ${w.status}`);if(!h.ok)throw new Error(`She's broke bahd! Response status: ${h.status}`);if(!S.ok)throw new Error(`She's broke bahd! Response status: ${S.status}`);if(!E.ok)throw new Error(`She's broke bahd! Response status: ${E.status}`);if(!I.ok)throw new Error(`She's broke bahd! Response status: ${I.status}`);u("Responses OK, pulling data...");const k=await e.json(),T=await w.json(),$=await h.json(),B=await S.json(),x=await E.json(),L=await I.json();u("Creating Head 2 Head JSON: Building Player structure...");let P={};for(const e in k){let t=k[e].Player,n="";if(t.includes(" | ")){let e=t.split(" | ");t=e[1],n=e[0]}P[t]={Characters:k[e].Characters,Country:k[e].Country,GameData:{Lifetime:{},Seasonal:{}},PlayerName:t,PowerRanking:{Lifetime:{Points:k[e].Points,Rank:k[e].Rank},Seasonal:{Points:"",Rank:""}},Tag:n,SetData:{Lifetime:{},Seasonal:{}}}}u("Creating Head 2 Head JSON: Seasonal Rankings...");for(const e in B){let t=B[e].Player,n=B[e].Points,a=B[e].Rank;t=f(t),P[t].PowerRanking.Seasonal.Points=n,P[t].PowerRanking.Seasonal.Rank=a}u("Data cleaning: Deleteing header arrays...");const R=T[0],H=$[0],D=x[0],b=L[0];delete T[0],delete $[0],delete x[0],delete L[0],u("Data cleaning: Lifetime Sets...");for(const e in T){let t=T[e].field2;null!=t&&(t=f(t),T[t]=T[e],delete T[e])}u("Data cleaning: Lifetime Games...");for(const e in $){let t=$[e].field2;null!=t&&(t=f(t),$[t]=$[e],delete $[e])}u("Data cleaning: Seasonal Sets...");for(const e in x){let t=x[e].field2;null!=t&&(t=f(t),x[t]=x[e],delete x[e])}u("Data cleaning: Seasonal Games...");for(const e in L){let t=L[e].field2;null!=t&&(t=f(t),L[t]=L[e],delete L[e])}u("Data cleaning: Key replacements for Lifetime Sets...");for(const e in T)for(const t in T[e]){let n=T[e][t],a=R[t];a=f(a),T[e][a]=n,delete T[e][t]}u("Data cleaning: Key replacements for Lifetime Games...");for(const e in $)for(const t in $[e]){let n=$[e][t],a=H[t];a=f(a),$[e][a]=n,delete $[e][t]}u("Data cleaning: Key replacements for Seasonal Sets...");for(const e in x)for(const t in x[e]){let n=x[e][t],a=D[t];a=f(a),x[e][a]=n,delete x[e][t]}u("Data cleaning: Key replacements for Seasonal Games...");for(const e in L)for(const t in L[e]){let n=L[e][t],a=b[t];a=f(a),L[e][a]=n,delete L[e][t]}u("Creating Head 2 Head JSON: Adding Lifetime Sets data...");for(const e in T)0==e?delete T[e]:(_(T,e),P[e].SetData.Lifetime=T[e]);u("Creating Head 2 Head JSON: Adding Seasonal Set data...");for(const e in x)0==e?delete x[e]:(_(x,e),P[e].SetData.Seasonal=x[e]);u("Creating Head 2 Head JSON: Adding Lifetime Game data...");for(const e in $)0==e?delete $[e]:(_($,e),P[e].GameData.Lifetime=$[e]);u("Creating Head 2 Head JSON: Adding Seasonal Game data...");for(const e in L)0==e?delete L[e]:(_(L,e),P[e].GameData.Seasonal=L[e]);u("Head 2 Head JSON compiled, creating list of Players..."),r.innerHTML+=`<option>${c}</option>`,d.innerHTML+=`<option>${m}</option>`;for(const e in P){let t=P[e].PlayerName,n=P[e].Rank;r.innerHTML+=`<option value="${n}">${t}</option>`,d.innerHTML+=`<option value="${n}">${t}</option>`}u("Finishing up..."),i.addEventListener("click",(function(){if(e=d,r.value!=c&&e.value!==m){window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"});let e=r.options[r.selectedIndex].innerText,t=d.options[d.selectedIndex].innerText,n=P[e].Tag,a=P[t].Tag,o=P[e].Characters.split(" - "),s=p+o[0]+g,l=p+o[1]+g,i=P[t].Characters.split(" - "),c=p+i[0]+g,m=p+i[1]+g,f=P[e].PowerRanking.Seasonal.Rank,u=P[e].PowerRanking.Lifetime.Points,_=P[e].PowerRanking.Seasonal.Points,w=P[t].PowerRanking.Seasonal.Rank,h=P[t].PowerRanking.Lifetime.Points,S=P[t].PowerRanking.Seasonal.Points,E=P[e].SetData.Seasonal[t],I=P[e].GameData.Seasonal[t],k=P[e].SetData.Lifetime[t],T=P[e].GameData.Lifetime[t];if(null!=E&&"0 -- 0"!=E){let o=E.split(y),i=I.split(y),r=k.split(y),d=T.split(y),p=r[0],g=d[0],$=o[0],B=i[0],x=r[1],L=d[1],P=o[1],R=i[1],H=parseInt(o[0]),D=parseInt(o[1]),b=parseInt(i[0]),C=parseInt(i[1]),j=Math.round(H/(H+D)*100),G=Math.round(b/(b+C)*100),v=parseInt(r[0]),N=parseInt(r[1]),O=parseInt(d[0]),A=parseInt(d[1]),M=Math.round(v/(v+N)*100),J=Math.round(O/(O+A)*100),K=100-j,q=100-G,F=100-M,z=100-J;s=s.replace(" ","-").toLowerCase(),l=l.replace(" ","-").toLowerCase(),c=c.replace(" ","-").toLowerCase(),m=m.replace(" ","-").toLowerCase();const Q=document.getElementById("player_one_character"),U=document.getElementById("player_two_character"),V=document.getElementById("player_one_name"),W=document.getElementById("player_two_name"),X=document.getElementById("player_one_tag"),Y=document.getElementById("player_two_tag"),Z=document.getElementById("player_one_pr"),ee=document.getElementById("player_two_pr"),te=document.getElementById("player_one_points_seasonal"),ne=document.getElementById("player_two_points_seasonal"),ae=document.getElementById("player_one_points_lifetime"),oe=document.getElementById("player_two_points_lifetime"),se=document.querySelectorAll(".sets"),le=document.querySelectorAll(".games"),ie=document.getElementById("lifetime_title"),re=document.getElementById("player_one_lifetime_sets"),de=document.getElementById("player_two_lifetime_sets"),ce=document.getElementById("player_one_lifetime_games"),me=document.getElementById("player_two_lifetime_games"),pe=document.getElementById("seasonal_title"),ge=document.getElementById("player_one_seasonal_sets"),ye=document.getElementById("player_two_seasonal_sets"),fe=document.getElementById("player_one_seasonal_games"),ue=document.getElementById("player_two_seasonal_games"),_e=document.getElementById("main_logo"),we=document.getElementById("player_one_details"),he=document.getElementById("player_two_details");_e.style.display="block",Q.src=s,U.src=c,we.style.display="block",he.style.display="block",X.innerText=n,Y.innerText=a,V.innerText=e,W.innerText=t,Z.innerText=`#${f}`,ee.innerText=`#${w}`,te.innerText=`Seasonal: ${_} pts`,ae.innerText=`Lifetime: ${u} pts`,ne.innerText=`Seasonal: ${S} pts`,oe.innerText=`Lifetime: ${h} pts`,se.forEach((e=>{e.innerText="Sets"})),le.forEach((e=>{e.innerText="Games"})),pe.innerText="Seasonal",ge.innerText=`${j}% (${$})`,ye.innerText=`${K}% (${P})`,fe.innerText=`${G}% (${B})`,ue.innerText=`${q}% (${R})`,ie.innerText="Lifetime",re.innerText=`${M}% (${p})`,de.innerText=`${F}% (${x})`,ce.innerText=`${J}% (${g})`,me.innerText=`${z}% (${L})`}else seasonal_sets_title.innerText="These players have not played a set this season!",console.log("These players have not played a set this season!")}var e})),u("Ready! Awaiting player selection."),console.group("Head 2 Head"),console.log(P),console.groupEnd();{r.options.selectedIndex=1,d.options.selectedIndex=2;let e=new Event("click");i.dispatchEvent(e)}}catch(e){console.error(e.message)}}()})();